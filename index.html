<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TextAlive App - Miku 2025 🌃</title>
    <style>
      /* Define your local font */
      @font-face {
        font-family: 'receipt-font';
        src: url('./receipt-font/receipt-font.ttf') format('truetype');
        font-weight: normal;
        font-style: normal;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'receipt-font', sans-serif;
        overflow-x: hidden;
        background: linear-gradient(
          to bottom,
          #0a0a1a 0%,
          #1a1a2e 50%,
          #16213e 100%
        );
        min-height: 100vh;
        position: relative;
        color: white;
      }

      /* Night Sky with Stars */
      .stars {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 60%;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 100"><circle cx="20" cy="20" r="1" fill="white" opacity="0.8"/><circle cx="60" cy="15" r="1.5" fill="white" opacity="0.6"/><circle cx="120" cy="25" r="1" fill="white" opacity="0.9"/><circle cx="180" cy="10" r="1" fill="white" opacity="0.7"/><circle cx="40" cy="40" r="0.5" fill="white" opacity="0.5"/><circle cx="160" cy="35" r="1" fill="white" opacity="0.8"/><circle cx="100" cy="5" r="0.5" fill="white" opacity="0.6"/></svg>')
          repeat;
        animation: twinkle 4s ease-in-out infinite alternate;
        z-index: -1;
      }

      @keyframes twinkle {
        0% {
          opacity: 0.8;
        }
        100% {
          opacity: 1;
        }
      }

      /* City Skyline Layers */
      .background-layer {
        position: fixed;
        bottom: 0;
        left: 0;
        pointer-events: none;
        z-index: -1;
        will-change: transform;
        backface-visibility: hidden;
        transform: translateZ(0);
      }

      /* Animation control classes */
      .paused .background-layer,
      .paused .street,
      .paused .rain {
        animation-play-state: paused;
      }

      .playing .background-layer,
      .playing .street,
      .playing .rain {
        animation-play-state: running;
      }

      .buildings-far {
        height: 40%;
        width: 4800px; /* 1600px pattern × 3 */
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1600 200"><!-- Varied far buildings --><rect x="0" y="120" width="60" height="80" fill="%23141426"/><polygon points="0,120 30,105 60,120 60,200 0,200" fill="%23141426"/><!-- peaked roof --><rect x="80" y="90" width="70" height="110" fill="%230f0f1f"/><rect x="80" y="85" width="70" height="5" fill="%23141426"/><!-- flat roof with edge --><rect x="170" y="110" width="35" height="90" fill="%23141426"/><rect x="170" y="140" width="50" height="60" fill="%23141426"/><!-- stepped building --><rect x="240" y="100" width="60" height="100" fill="%230f0f1f"/><rect x="265" y="95" width="10" height="5" fill="%23141426"/><!-- antenna --><rect x="320" y="125" width="45" height="75" fill="%23141426"/><polygon points="320,125 342,110 365,125 365,200 320,200" fill="%23141426"/><!-- peaked roof --><rect x="385" y="95" width="40" height="105" fill="%230f0f1f"/><rect x="425" y="110" width="15" height="90" fill="%230f0f1f"/><!-- tower section --><rect x="460" y="115" width="50" height="85" fill="%23141426"/><rect x="460" y="110" width="50" height="5" fill="%23141426"/><!-- flat roof --><rect x="530" y="85" width="65" height="115" fill="%230f0f1f"/><polygon points="530,85 562,70 595,85 595,200 530,200" fill="%230f0f1f"/><!-- peaked roof --><rect x="615" y="105" width="25" height="95" fill="%23141426"/><rect x="640" y="120" width="15" height="80" fill="%23141426"/><!-- narrow tower --><rect x="675" y="120" width="55" height="80" fill="%230f0f1f"/><rect x="675" y="115" width="55" height="5" fill="%230f0f1f"/><!-- flat roof --><rect x="750" y="100" width="50" height="100" fill="%23141426"/><rect x="750" y="130" width="35" height="70" fill="%23141426"/><!-- stepped --><rect x="820" y="90" width="45" height="110" fill="%230f0f1f"/><rect x="865" y="105" width="15" height="95" fill="%230f0f1f"/><!-- L-shaped --><rect x="900" y="115" width="45" height="85" fill="%23141426"/><polygon points="900,115 922,100 945,115 945,200 900,200" fill="%23141426"/><!-- peaked --><rect x="965" y="105" width="50" height="95" fill="%230f0f1f"/><rect x="985" y="100" width="10" height="5" fill="%23141426"/><!-- antenna --><rect x="1035" y="125" width="40" height="75" fill="%23141426"/><rect x="1035" y="140" width="25" height="60" fill="%23141426"/><!-- stepped --><rect x="1095" y="95" width="55" height="105" fill="%230f0f1f"/><rect x="1095" y="90" width="55" height="5" fill="%230f0f1f"/><!-- flat roof --><rect x="1170" y="110" width="35" height="90" fill="%23141426"/><rect x="1205" y="125" width="15" height="75" fill="%23141426"/><!-- tower --><rect x="1240" y="100" width="60" height="100" fill="%230f0f1f"/><polygon points="1240,100 1270,85 1300,100 1300,200 1240,200" fill="%230f0f1f"/><!-- peaked --><rect x="1320" y="115" width="30" height="85" fill="%23141426"/><rect x="1350" y="130" width="15" height="70" fill="%23141426"/><!-- narrow sections --><rect x="1385" y="90" width="55" height="110" fill="%230f0f1f"/><rect x="1385" y="85" width="55" height="5" fill="%230f0f1f"/><!-- flat roof --><rect x="1460" y="120" width="50" height="80" fill="%23141426"/><rect x="1460" y="135" width="35" height="65" fill="%23141426"/><!-- stepped --><rect x="1530" y="105" width="30" height="95" fill="%230f0f1f"/><rect x="1560" y="120" width="15" height="80" fill="%230f0f1f"/><!-- tower sections --><!-- Sparse windows --><rect x="25" y="155" width="6" height="6" fill="%23ffeb3b" opacity="0.8"/><rect x="100" y="120" width="6" height="6" fill="%23ff9800" opacity="0.8"/><rect x="130" y="135" width="6" height="6" fill="%23ff9800" opacity="0.7"/><rect x="185" y="130" width="4" height="4" fill="%23ffeb3b" opacity="0.8"/><rect x="260" y="125" width="6" height="6" fill="%23ff9800" opacity="0.8"/><rect x="275" y="140" width="6" height="6" fill="%23ff9800" opacity="0.8"/><rect x="335" y="145" width="4" height="4" fill="%23ffeb3b" opacity="0.8"/><rect x="405" y="120" width="6" height="6" fill="%23ff9800" opacity="0.8"/><rect x="420" y="135" width="6" height="6" fill="%23ff9800" opacity="0.8"/><rect x="480" y="135" width="4" height="4" fill="%23ffeb3b" opacity="0.8"/><rect x="550" y="115" width="6" height="6" fill="%23ff9800" opacity="0.8"/><rect x="565" y="130" width="6" height="6" fill="%23ff9800" opacity="0.8"/><rect x="630" y="125" width="4" height="4" fill="%23ffeb3b" opacity="0.8"/><rect x="695" y="140" width="6" height="6" fill="%23ff9800" opacity="0.8"/><rect x="770" y="120" width="4" height="4" fill="%23ffeb3b" opacity="0.8"/><rect x="840" y="115" width="6" height="6" fill="%23ff9800" opacity="0.8"/><rect x="855" y="130" width="6" height="6" fill="%23ff9800" opacity="0.8"/><rect x="915" y="135" width="4" height="4" fill="%23ffeb3b" opacity="0.8"/><rect x="985" y="125" width="4" height="4" fill="%23ff9800" opacity="0.8"/><rect x="1045" y="145" width="4" height="4" fill="%23ffeb3b" opacity="0.8"/><rect x="1115" y="120" width="6" height="6" fill="%23ff9800" opacity="0.8"/><rect x="1130" y="135" width="6" height="6" fill="%23ff9800" opacity="0.8"/><rect x="1185" y="130" width="4" height="4" fill="%23ffeb3b" opacity="0.8"/><rect x="1260" y="125" width="6" height="6" fill="%23ff9800" opacity="0.8"/><rect x="1275" y="140" width="6" height="6" fill="%23ff9800" opacity="0.8"/><rect x="1335" y="135" width="4" height="4" fill="%23ffeb3b" opacity="0.8"/><rect x="1405" y="115" width="6" height="6" fill="%23ff9800" opacity="0.8"/><rect x="1420" y="130" width="6" height="6" fill="%23ff9800" opacity="0.8"/><rect x="1475" y="140" width="4" height="4" fill="%23ffeb3b" opacity="0.8"/><rect x="1545" y="125" width="4" height="4" fill="%23ff9800" opacity="0.8"/></svg>')
          repeat-x;
        animation: scrollSlow 80s linear infinite;
      }

      .buildings-mid {
        height: 60%;
        width: 3600px; /* 1200px pattern × 3 */
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 300"><!-- Varied mid buildings --><rect x="0" y="150" width="45" height="150" fill="%231a1a2e"/><rect x="45" y="170" width="15" height="130" fill="%231a1a2e"/><!-- stepped building --><rect x="80" y="120" width="50" height="180" fill="%230e1124"/><polygon points="80,120 105,105 130,120 130,300 80,300" fill="%230e1124"/><!-- peaked roof --><rect x="150" y="130" width="70" height="170" fill="%231a1a2e"/><rect x="150" y="125" width="70" height="5" fill="%231a1a2e"/><!-- flat roof edge --><rect x="150" y="140" width="50" height="160" fill="%231a1a2e"/><!-- main section --><rect x="240" y="100" width="35" height="200" fill="%230e1124"/><rect x="275" y="130" width="15" height="170" fill="%230e1124"/><!-- tower with antenna --><rect x="285" y="95" width="5" height="10" fill="%23141426"/><!-- antenna --><rect x="310" y="140" width="60" height="160" fill="%231a1a2e"/><rect x="310" y="160" width="45" height="140" fill="%231a1a2e"/><!-- stepped facade --><rect x="390" y="110" width="30" height="190" fill="%230e1124"/><rect x="420" y="125" width="15" height="175" fill="%230e1124"/><!-- narrow tower --><polygon points="390,110 405,95 420,110 420,300 390,300" fill="%230e1124"/><!-- peaked section --><rect x="455" y="160" width="50" height="140" fill="%231a1a2e"/><rect x="455" y="155" width="50" height="5" fill="%231a1a2e"/><!-- roof detail --><rect x="525" y="120" width="25" height="180" fill="%230e1124"/><rect x="550" y="140" width="15" height="160" fill="%230e1124"/><!-- split tower --><rect x="585" y="90" width="40" height="210" fill="%231a1a2e"/><rect x="625" y="110" width="15" height="190" fill="%231a1a2e"/><!-- main with side tower --><polygon points="585,90 602,75 625,90 625,300 585,300" fill="%231a1a2e"/><!-- peaked top --><rect x="660" y="140" width="50" height="160" fill="%230e1124"/><rect x="710" y="155" width="15" height="145" fill="%230e1124"/><!-- L-shaped --><rect x="745" y="110" width="35" height="190" fill="%231a1a2e"/><rect x="780" y="130" width="15" height="170" fill="%231a1a2e"/><!-- stepped design --><rect x="815" y="80" width="30" height="220" fill="%230e1124"/><rect x="845" y="100" width="15" height="200" fill="%230e1124"/><!-- tall narrow --><rect x="855" y="95" width="5" height="10" fill="%23141426"/><!-- antenna --><rect x="880" y="150" width="60" height="150" fill="%231a1a2e"/><rect x="880" y="170" width="45" height="130" fill="%231a1a2e"/><!-- setback --><rect x="960" y="100" width="40" height="200" fill="%230e1124"/><rect x="1000" y="120" width="15" height="180" fill="%230e1124"/><!-- tower complex --><polygon points="960,100 980,85 1000,100 1000,300 960,300" fill="%230e1124"/><!-- peaked --><rect x="1035" y="130" width="35" height="170" fill="%231a1a2e"/><rect x="1070" y="145" width="15" height="155" fill="%231a1a2e"/><!-- irregular shape --><rect x="1105" y="90" width="30" height="210" fill="%230e1124"/><rect x="1135" y="110" width="15" height="190" fill="%230e1124"/><!-- twin towers --><rect x="1170" y="160" width="30" height="140" fill="%231a1a2e"/><!-- simple end --><!-- Moderate window coverage --><rect x="20" y="200" width="8" height="8" fill="%23ff9800" opacity="0.9"/><rect x="35" y="220" width="8" height="8" fill="%23ff9800" opacity="0.8"/><rect x="95" y="150" width="8" height="8" fill="%23ffeb3b" opacity="0.8"/><rect x="110" y="180" width="8" height="8" fill="%23ffeb3b" opacity="0.9"/><rect x="170" y="160" width="10" height="10" fill="%23ff9800" opacity="0.9"/><rect x="200" y="180" width="10" height="10" fill="%23ff9800" opacity="0.7"/><rect x="255" y="140" width="6" height="6" fill="%23ffeb3b" opacity="0.7"/><rect x="265" y="170" width="6" height="6" fill="%23ffeb3b" opacity="0.9"/><rect x="330" y="170" width="8" height="8" fill="%23ff9800" opacity="0.9"/><rect x="345" y="200" width="8" height="8" fill="%23ff9800" opacity="0.7"/><rect x="405" y="140" width="6" height="6" fill="%23ffeb3b" opacity="0.8"/><rect x="420" y="170" width="6" height="6" fill="%23ffeb3b" opacity="0.7"/><rect x="470" y="190" width="8" height="8" fill="%23ff9800" opacity="0.9"/><rect x="485" y="210" width="8" height="8" fill="%23ff9800" opacity="0.8"/><rect x="540" y="150" width="6" height="6" fill="%23ffeb3b" opacity="0.8"/><rect x="550" y="180" width="6" height="6" fill="%23ffeb3b" opacity="0.7"/><rect x="605" y="120" width="10" height="10" fill="%23ff9800" opacity="0.9"/><rect x="620" y="150" width="10" height="10" fill="%23ff9800" opacity="0.7"/><rect x="680" y="170" width="8" height="8" fill="%23ffeb3b" opacity="0.9"/><rect x="710" y="190" width="8" height="8" fill="%23ffeb3b" opacity="0.7"/><rect x="765" y="140" width="6" height="6" fill="%23ff9800" opacity="0.8"/><rect x="775" y="170" width="6" height="6" fill="%23ff9800" opacity="0.7"/><rect x="830" y="120" width="6" height="6" fill="%23ffeb3b" opacity="0.8"/><rect x="845" y="150" width="6" height="6" fill="%23ffeb3b" opacity="0.7"/><rect x="900" y="180" width="8" height="8" fill="%23ff9800" opacity="0.9"/><rect x="915" y="210" width="8" height="8" fill="%23ff9800" opacity="0.7"/><rect x="980" y="130" width="6" height="6" fill="%23ffeb3b" opacity="0.8"/><rect x="995" y="160" width="6" height="6" fill="%23ffeb3b" opacity="0.7"/><rect x="1050" y="160" width="8" height="8" fill="%23ff9800" opacity="0.9"/><rect x="1065" y="190" width="8" height="8" fill="%23ff9800" opacity="0.7"/><rect x="1120" y="120" width="6" height="6" fill="%23ffeb3b" opacity="0.8"/><rect x="1135" y="150" width="6" height="6" fill="%23ffeb3b" opacity="0.7"/><rect x="1180" y="190" width="6" height="6" fill="%23ff9800" opacity="0.9"/></svg>')
          repeat-x;
        animation: scrollMedium 50s linear infinite;
      }

      .buildings-close {
        height: 80%;
        width: 2400px; /* 800px pattern × 3 */
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 400"><!-- Varied close buildings --><rect x="0" y="200" width="60" height="200" fill="%23252547"/><rect x="60" y="220" width="20" height="180" fill="%23252547"/><!-- stepped facade --><rect x="100" y="150" width="45" height="250" fill="%231a1a2e"/><rect x="145" y="170" width="15" height="230" fill="%231a1a2e"/><!-- tower with annex --><polygon points="100,150 122,135 145,150 145,400 100,400" fill="%231a1a2e"/><!-- peaked roof --><rect x="180" y="120" width="35" height="280" fill="%23252547"/><rect x="215" y="140" width="15" height="260" fill="%23252547"/><!-- twin towers --><rect x="180" y="115" width="35" height="5" fill="%23252547"/><!-- roof detail --><rect x="250" y="180" width="45" height="220" fill="%231a1a2e"/><rect x="295" y="200" width="15" height="200" fill="%231a1a2e"/><!-- L-shaped --><rect x="250" y="195" width="30" height="15" fill="%231a1a2e"/><!-- balcony --><rect x="330" y="140" width="35" height="260" fill="%23252547"/><rect x="365" y="160" width="15" height="240" fill="%23252547"/><!-- irregular tower --><polygon points="330,140 347,125 365,140 365,400 330,400" fill="%23252547"/><!-- peaked section --><rect x="400" y="200" width="25" height="200" fill="%231a1a2e"/><rect x="425" y="180" width="15" height="220" fill="%231a1a2e"/><!-- narrow complex --><rect x="460" y="160" width="40" height="240" fill="%23252547"/><rect x="500" y="180" width="15" height="220" fill="%23252547"/><!-- main with side --><rect x="460" y="155" width="40" height="5" fill="%23252547"/><!-- roof edge --><rect x="485" y="175" width="15" height="10" fill="%23252547"/><!-- balcony detail --><rect x="535" y="120" width="30" height="280" fill="%231a1a2e"/><rect x="565" y="140" width="15" height="260" fill="%231a1a2e"/><!-- tall narrow --><rect x="575" y="115" width="5" height="10" fill="%23141426"/><!-- antenna --><rect x="600" y="180" width="45" height="220" fill="%23252547"/><rect x="645" y="200" width="15" height="200" fill="%23252547"/><!-- stepped design --><rect x="600" y="195" width="35" height="15" fill="%23252547"/><!-- balcony --><rect x="680" y="140" width="35" height="260" fill="%231a1a2e"/><rect x="715" y="160" width="15" height="240" fill="%231a1a2e"/><!-- tower complex --><polygon points="680,140 697,125 715,140 715,400 680,400" fill="%231a1a2e"/><!-- peaked --><rect x="750" y="200" width="35" height="200" fill="%23252547"/><rect x="785" y="220" width="15" height="180" fill="%23252547"/><!-- final stepped --><!-- Select windows with balcony details --><rect x="20" y="280" width="12" height="12" fill="%23ffc107" opacity="0.9"/><rect x="45" y="250" width="12" height="12" fill="%23ffc107" opacity="0.8"/><rect x="20" y="340" width="12" height="12" fill="%23ffc107" opacity="0.8"/><rect x="115" y="210" width="15" height="15" fill="%23ff9800" opacity="0.8"/><rect x="140" y="270" width="15" height="15" fill="%23ff9800" opacity="0.9"/><rect x="115" y="330" width="15" height="15" fill="%23ff9800" opacity="0.7"/><rect x="195" y="170" width="10" height="10" fill="%23ffc107" opacity="0.7"/><rect x="210" y="210" width="10" height="10" fill="%23ffc107" opacity="0.9"/><rect x="195" y="250" width="10" height="10" fill="%23ffc107" opacity="0.8"/><rect x="270" y="230" width="12" height="12" fill="%23ff9800" opacity="0.7"/><rect x="285" y="290" width="12" height="12" fill="%23ff9800" opacity="0.9"/><rect x="270" y="320" width="12" height="12" fill="%23ff9800" opacity="0.8"/><rect x="345" y="190" width="10" height="10" fill="%23ffc107" opacity="0.7"/><rect x="360" y="230" width="10" height="10" fill="%23ffc107" opacity="0.9"/><rect x="345" y="270" width="10" height="10" fill="%23ffc107" opacity="0.8"/><rect x="415" y="240" width="8" height="8" fill="%23ff9800" opacity="0.8"/><rect x="425" y="280" width="8" height="8" fill="%23ff9800" opacity="0.9"/><rect x="415" y="300" width="8" height="8" fill="%23ff9800" opacity="0.7"/><rect x="480" y="210" width="10" height="10" fill="%23ffc107" opacity="0.8"/><rect x="495" y="250" width="10" height="10" fill="%23ffc107" opacity="0.9"/><rect x="480" y="270" width="10" height="10" fill="%23ffc107" opacity="0.7"/><rect x="550" y="170" width="8" height="8" fill="%23ff9800" opacity="0.8"/><rect x="565" y="210" width="8" height="8" fill="%23ff9800" opacity="0.9"/><rect x="550" y="250" width="8" height="8" fill="%23ff9800" opacity="0.7"/><rect x="620" y="230" width="12" height="12" fill="%23ffc107" opacity="0.8"/><rect x="635" y="290" width="12" height="12" fill="%23ffc107" opacity="0.9"/><rect x="620" y="320" width="12" height="12" fill="%23ffc107" opacity="0.7"/><rect x="695" y="190" width="8" height="8" fill="%23ff9800" opacity="0.8"/><rect x="710" y="230" width="8" height="8" fill="%23ff9800" opacity="0.9"/><rect x="695" y="270" width="8" height="8" fill="%23ff9800" opacity="0.7"/><rect x="770" y="240" width="10" height="10" fill="%23ffc107" opacity="0.8"/><rect x="780" y="280" width="10" height="10" fill="%23ffc107" opacity="0.9"/><rect x="770" y="300" width="10" height="10" fill="%23ffc107" opacity="0.7"/></svg>')
          repeat-x;
        animation: scrollFast 30s linear infinite;
      }

      @keyframes scrollSlow {
        0% {
          transform: translateX(0);
        }
        100% {
          transform: translateX(-1600px); /* 1/3 of total width */
        }
      }

      @keyframes scrollMedium {
        0% {
          transform: translateX(0);
        }
        100% {
          transform: translateX(-1200px); /* 1/3 of total width */
        }
      }

      @keyframes scrollFast {
        0% {
          transform: translateX(0);
        }
        100% {
          transform: translateX(-800px); /* 1/3 of total width */
        }
      }

      /* Street and Sidewalk */
      .street {
        position: fixed;
        bottom: 0;
        left: 0;
        width: 2400px; /* 800px pattern × 3 */
        height: 20%;
        background: linear-gradient(
            to bottom,
            #2c2c54 0%,
            #1a1a2e 50%,
            #0f0f1f 100%
          ),
          repeating-linear-gradient(
            90deg,
            transparent 0px,
            transparent 40px,
            rgba(255, 255, 255, 0.1) 41px,
            rgba(255, 255, 255, 0.1) 43px,
            transparent 44px,
            transparent 80px
          );
        animation: scrollStreet 20s linear infinite;
        z-index: -1;
        will-change: transform;
        transform: translateZ(0);
        backface-visibility: hidden;
      }

      @keyframes scrollStreet {
        0% {
          transform: translateX(0);
        }
        100% {
          transform: translateX(-800px); /* 1/3 of total width */
        }
      }

      /* Walking Character */
      .walking-character {
        --character-img1: url('./src/assets/miku1.png');
        --character-img2: url('./src/assets/miku2.png');
        position: fixed;
        bottom: 10%; /* Position on the street level */
        left: 15%; /* Keep character in one place on screen */
        width: 250px;
        height: 390px;
        background-image: var(--character-img1);

        background-size: contain;
        background-repeat: no-repeat;
        background-position: bottom center;
        z-index: 5;
        animation: walkingFrames 1.026s steps(1) infinite,
          bounce 0.513s ease-in-out infinite;
        will-change: transform, background-image;
        transform: translateZ(0);
        backface-visibility: hidden;
      }

      @keyframes walkingFrames {
        0%,
        49% {
          background-image: var(--character-img1);
        }
        50%,
        100% {
          background-image: var(--character-img2);
        }
      }

      @keyframes bounce {
        0%,
        100% {
          transform: translateY(0px);
        }
        50% {
          transform: translateY(-8px);
        }
      }

      /* Hop animation for space key */
      .walking-character.hopping {
        animation: walkingFrames 1.026s steps(1) infinite,
          hop 1.026s cubic-bezier(0.25, 0.46, 0.45, 0.94); /* More satisfying easing */
      }

      @keyframes hop {
        0% {
          transform: translateY(0px);
        }

        35% {
          transform: translateY(-39px); /* Higher jump with stretch */
        }
        39% {
          transform: translateY(-39px); /* Hang time at peak */
        }
        70% {
          transform: translateY(-8px); /* Slower descent start */
        }
        100% {
          transform: translateY(0px); /* Settle */
        }
      }

      /* Animation control for walking character */
      .paused .walking-character {
        animation-play-state: paused;
      }

      .playing .walking-character {
        animation-play-state: running;
      }

      /* Main Container */
      .container {
        position: relative;
        margin: 0 auto;
        padding: 20px;
        z-index: 10;
        min-height: 100vh;
        display: flex;
        justify-content: center;
        overflow: hidden;
      }

      /* Navigation Controls */
      #control {
        position: fixed;
        top: 20px;
        left: 20px;
        background: rgba(0, 0, 0, 0.9);
        border: 2px solid #00bcd4;
        border-radius: 8px;
        padding: 12px;
        z-index: 100;
        display: none;
        box-shadow: 0 0 20px rgba(0, 188, 212, 0.3),
          inset 0 0 20px rgba(0, 188, 212, 0.1);
        backdrop-filter: blur(10px);
      }

      #control button {
        font-family: 'receipt-font';
        background: linear-gradient(
          to bottom,
          #37474f 0%,
          #263238 50%,
          #37474f 100%
        );
        border: 1px solid #00bcd4;
        color: #00bcd4;
        padding: 8px 12px;
        margin: 3px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 11px;
        font-weight: bold;
        text-shadow: 0 0 5px rgba(0, 188, 212, 0.5);
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3),
          inset 0 1px 2px rgba(255, 255, 255, 0.1);
        transition: all 0.2s ease;
        display: block;
        width: 90px;
        text-align: center;
      }

      #control button:hover:not(:disabled) {
        background: linear-gradient(
          to bottom,
          #455a64 0%,
          #37474f 50%,
          #455a64 100%
        );
        box-shadow: 0 0 15px rgba(0, 188, 212, 0.5),
          0 2px 5px rgba(0, 0, 0, 0.3);
        transform: translateY(-1px);
      }

      #control button:active:not(:disabled) {
        transform: translateY(1px);
        box-shadow: 0 0 10px rgba(0, 188, 212, 0.3),
          inset 0 2px 5px rgba(0, 0, 0, 0.3);
      }

      #control button:disabled {
        background: #1a1a1a;
        border-color: #444;
        color: #666;
        box-shadow: inset 0 2px 5px rgba(0, 0, 0, 0.3);
        cursor: not-allowed;
        text-shadow: none;
      }

      #control button::before {
        content: '▶';
        margin-right: 5px;
      }

      #control .play::before {
        content: '▶';
      }
      #control #pause::before {
        content: '⏸';
      }
      #control #rewind::before {
        content: '⏪';
      }
      #control #jump::before {
        content: '🎵';
      }

      /* Lyrics Text Display - Scattered like stars */
      #text {
        position: fixed;
        width: 75%;
        height: 22rem; /* Upper portion of screen for sky */
        font-size: 39px;
        font-weight: 300;
        text-align: center;
        min-height: auto;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        background: transparent;
        color: #ffffff;
        border: none;
        border-radius: 0;
        box-shadow: none;
        overflow: visible;
        backdrop-filter: none;
        padding: 0;
        z-index: 10;
        pointer-events: none;
      }

      .star-phrase {
        display: flex;
        transform-origin: center;
        white-space: nowrap;
        gap: 0.25rem;
      }

      .star-unit {
        margin: 0 1px;
        padding: 0;
        transform-origin: center;
        letter-spacing: normal;
        white-space: nowrap;
        color: #6c6c6c; /* dim color */
        --random-delay: calc(var(--i, 0) * 0.1s);
      }

      .star-unit.animate {
        animation-delay: var(--random-delay);
        color: #ffffff; /* bright color */
        text-shadow: 0 0 8px rgba(255, 255, 255, 0.9),
          0 0 16px rgba(255, 255, 255, 0.7), 0 0 24px rgba(255, 255, 255, 0.5);
      }

      /* .star-unit.animate::before {
        content: '✦';
        position: absolute;
        top: -8px;
        left: 50%;
        transform: translateX(-50%);
        font-size: 0.5em;
        opacity: 0;
        animation: starGlow 4s ease-in-out infinite;
        animation-delay: 0.39s;
      } */

      .star-unit.animate::after {
        content: '';
        position: absolute;
        top: 50%;
        left: 50%;
        width: 1px;
        height: 1px;
        background: radial-gradient(circle, #ffffff 0%, transparent 50%);
        border-radius: 50%;
        transform: translate(-50%, -50%);
        box-shadow: 0 0 4px rgba(255, 255, 255, 0.9),
          0 0 8px rgba(255, 255, 255, 0.6), 0 0 12px rgba(255, 255, 255, 0.3);
        animation: starPulse 2.5s ease-in-out infinite;
        animation-delay: 0.39s;
      }

      @keyframes starPulse {
        0%,
        100% {
          opacity: 0.5;
          transform: translate(-50%, -50%) scale(0.8);
        }
        50% {
          opacity: 1;
          transform: translate(-50%, -50%) scale(1.6);
        }
      }

      /* Rain Effect */
      .rain {
        position: fixed;
        top: -100px;
        left: 0;
        width: 100%;
        height: 120%;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><line x1="10" y1="0" x2="8" y2="15" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/><line x1="25" y1="0" x2="23" y2="12" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/><line x1="40" y1="0" x2="38" y2="18" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/><line x1="60" y1="0" x2="58" y2="14" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/><line x1="75" y1="0" x2="73" y2="16" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/><line x1="90" y1="0" x2="88" y2="13" stroke="rgba(255,255,255,0.1)" stroke-width="0.5"/></svg>')
          repeat;
        animation: rain 1.2s linear infinite;
        pointer-events: none;
        z-index: 5;
        opacity: 0.3;
        will-change: transform;
      }

      @keyframes rain {
        0% {
          transform: translate3d(0, -100px, 0);
        }
        100% {
          transform: translate3d(0, 100vh, 0);
        }
      }

      audio {
        display: none;
      }
    </style>
  </head>
  <body>
    <!-- Night Scene Layers -->
    <div class="stars"></div>
    <div class="background-layer buildings-far"></div>
    <div class="background-layer buildings-mid"></div>
    <div class="background-layer buildings-close"></div>
    <div class="street"></div>
    <div class="rain"></div>

    <!-- Walking Character -->
    <div class="walking-character"></div>

    <div class="container">
      <div id="text">
        ✨ Lyrics will appear as stars across the night sky ✨
      </div>

      <audio id="media" controls style="display: none"></audio>

      <div id="control">
        <button class="play" disabled>再生</button>
        <button id="pause" disabled>一時停止</button>
        <button id="rewind" disabled>巻き戻し</button>
        <button id="jump" disabled>歌詞頭出し</button>
      </div>
    </div>

    <script type="module" src="./src/character.ts"></script>
    <script type="module" src="./src/index.ts"></script>
  </body>
</html>
